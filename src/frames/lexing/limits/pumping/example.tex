% SPDX-License-Identifier: CC-BY-SA-4.0
% Author: Matthieu Perrin
% Part: 
% Section: 
% Sub-section: 
% Frame: 

\begingroup

\begin{frame}{Exemple d'utilisation du lemme de l'étoile}

  \tfBlock[top=-5mm]{Montrer que $L \eqdef \{a^nb^n : n\in \mathbb{N}\}$ n'est pas rationnel}{

    \uncover<2-|handout>{
      Supposons (par contradiction) $L$ rationnel.
    }%
    \uncover<3-|handout>{%
      D'après le lemme de l'étoile :

      \vspace{-2mm}
      $$
      \begin{array}{c}
        \structure<4->{\exists N\in \mathbb{N}}, \alert<5->{\forall u\in L}, |u| \ge N \Rightarrow (\structure<6->{\exists x, y, z\in \Sigma^\star}, \\
        u = x\cdot y \cdot z \land y\neq \varepsilon \land |xy| \le N \land \alert<7->{\forall i \in \mathbb{N}}, x\cdot y^i \cdot z \in L)
      \end{array}
      $$
    }

    \uncover<4-|handout>{%
      \structure{Soit $N$ donné par le lemme de l'étoile}. \\
    }\uncover<5-|handout>{%
      \alert{Posons $u = a^N b^N$}. 
    }\uncover<6-|handout>{%
      On a bien $u\in L$ et $|u| = 2N \ge N$. \\
    }\uncover<7-|handout>{%
      \structure{Soit $x\cdot y \cdot z$ la décomposition de $u$ donnée par le lemme de l'étoile}. 
    }

    \uncover<12-|handout>{
      \vspace{1mm}
      \begin{itemize}
      \item $xy$ : un préfixe de $a^N b^N$, de longueur au plus $N$, ne contient que des $a$.
      \end{itemize}
      
      On a: \hspace\fill $\structure{x = a^{|x|}}$, \hspace\fill $\structure{y = a^{|y|}}$ avec $|y| \neq 0$, \hspace\fill et $\structure{z = a^{N - |x| - |y|} b^N}$.\hspace\fill~ 

      
      \vspace{2mm}
      \alert{Posons $i = 2$}, on a : $\begin{array}[t]{rcl}
        x\cdot y^i \cdot z & = & x\cdot y \cdot y \cdot z\\
        & = & a^{|x|} \cdot a^{|y|} \cdot a^{|y|} \cdot a^{N - |x| - |y|} b^N\\
        %      & = & a^{|x| + |y| + |y| + N - |x| - |y|} b^N\\
        & = & a^{N + |y|} b^N\\
        %      & \in & L\\
      \end{array}$

      \begin{itemize}
      \item\vspace{-1mm} $\structure{x\cdot y^2 \cdot z \in L}$ d'après le lemme de l'étoile 
      \item\vspace{-1mm} $\structure{x\cdot y^2 \cdot z \notin L}$ car $|x\cdot y^2 \cdot z|_a = N+|y| \neq N = |x\cdot y^2 \cdot z|_b$
      \end{itemize}
      
      Absurde ! Donc $L$ n'est pas rationnel. 
    }
  }
  
  \tfExampleBlock<-11>[y=-5mm, anchor=base]{Brouillon}{
    \example{On veut démontrer :} 
    \only<1>{ $L \notin \textsc{rat}_\Sigma$}
    \only<2-4,6->{ Contradiction}
    \only<5>{ $u\in L \land |u| \ge N$}

    \example{On sait :} 
    \begin{itemize}
    \item 
      \only<-2>{\hspace{-1.5mm}$\begin{array}[t]{l}
          \alert{\forall L \in \textsc{rat}_\Sigma}, \exists N\in \mathbb{N}, \forall u\in L, |u| \ge N \Rightarrow (\exists x, y, z\in \Sigma^\star, \\
          u = x y  z \land y\neq \varepsilon \land |xy| \le N \land \forall i \in \mathbb{N}, x y^i  z \in L)
        \end{array}$}
      \only<3>{$\hspace{-1.5mm}\begin{array}[t]{l}
          \structure{\exists N\in \mathbb{N}}, \forall u\in L, |u| \ge N \Rightarrow (\exists x, y, z\in \Sigma^\star, \\
          u = x y  z \land y\neq \varepsilon \land |xy| \le N \land \forall i \in \mathbb{N}, x y^i  z \in L)
        \end{array}$}
      \only<4>{$\hspace{-1.5mm}\begin{array}[t]{l}
          \alert{\forall u\in L, |u| \ge N \Rightarrow} (\exists x, y, z\in \Sigma^\star, \\
          u = x y  z \land y\neq \varepsilon \land |xy| \le N \land \forall i \in \mathbb{N}, x y^i  z \in L)
        \end{array}$}
      \only<5>{$\hspace{-1.5mm}\begin{array}[t]{l}
          \alert{(u\in L \land |u| \ge N) \Rightarrow} (\exists x, y, z\in \Sigma^\star, \\
          u = x y  z \land y\neq \varepsilon \land |xy| \le N \land \forall i \in \mathbb{N}, x y^i  z \in L)
        \end{array}$}
      \only<6>{$\structure{\exists x, y, z\in \Sigma^\star}, u = x y  z \land y\neq \varepsilon \land |xy| \le N \land \forall i \in \mathbb{N}, x y^i z \in L$}
      \only<7->{\alert<11>{$\forall i \in \mathbb{N}, x y^i  z \in L$}}
    \end{itemize}

    \vspace{-1mm}
    \begin{minipage}{2.5cm}
      \begin{itemize}
      \item<2-> $L \in \textsc{rat}_\Sigma$
      \item<4-> $N \in \mathbb{N}$
      \item<7-> \alert<9>{$y\neq \varepsilon$}
      \end{itemize}
    \end{minipage}
    \begin{minipage}{2.5cm}
      \begin{itemize}
      \item<7-> $x, y, z\in \Sigma^\star$
      \item<7-> $u = x y z$
      \item<7-> $\alert<10>{|xy| \le N}$
      \end{itemize}
    \end{minipage}
  }

  \tfExampleBlock<8-11>[right=.5\textwidth, y=-5mm, anchor=base]{Exemple : pour $N=2$, $u=aabb$}{
    \begin{tikzpicture}
      \footnotesize
      \newcommand\tabw{1.25}
      \newcommand\tabh{.5}

      \node (a1) at (0*\tabw,4*\tabh) {};
      \node (a2) at (1*\tabw,4*\tabh) {};
      \node (a3) at (2*\tabw,4*\tabh) {};
      \node (a4) at (3*\tabw,4*\tabh) {};
      \node (a5) at (4*\tabw,4*\tabh) {};
      \node (b1) at (0*\tabw,3*\tabh) {};
      \node (b2) at (1*\tabw,3*\tabh) {};
      \node (b3) at (2*\tabw,3*\tabh) {};
      \node (b4) at (3*\tabw,3*\tabh) {};
      \node (c1) at (0*\tabw,2*\tabh) {};
      \node (c2) at (1*\tabw,2*\tabh) {};
      \node (c3) at (2*\tabw,2*\tabh) {};
      \node (d1) at (0*\tabw,1*\tabh) {};
      \node (d2) at (1*\tabw,1*\tabh) {};
      \node (e1) at (0*\tabw,0*\tabh) {};
      
      \fill<9,10>[alert!20] (a1) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2); 
      \fill<10>  [alert!20] (a2) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2); 
      \fill<10>  [alert!20] (a3) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2); 
      \fill<10>  [alert!20] (a4) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2); 
      \fill<10>  [alert!20] (a5) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2); 
      \fill<9,10>[alert!20] (b1) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2); 
      \fill<10>  [alert!20] (b2) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2); 
      \fill<10>  [alert!20] (b3) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2); 
      \fill<10>  [alert!20] (b4) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2); 
      \fill<9>   [alert!20] (c1) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2); 
      \fill<11>  [alert!20] (c2) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2); 
      \fill<11>  [alert!20] (c3) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2); 
      \fill<9>   [alert!20] (d1) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2); 
      \fill<11>  [alert!20] (d2) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2); 
      \fill<9>   [alert!20] (e1) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2); 

      \draw[structure!30]   (a1) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2);  
      \draw[structure!30]   (a2) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2);  
      \draw[structure!30]   (a3) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2);  
      \draw[structure!30]   (a4) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2);  
      \draw[structure!30]   (a5) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2);  
      \draw[structure!30]   (b1) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2);  
      \draw[structure!30]   (b2) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2);  
      \draw[structure!30]   (b3) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2);  
      \draw[structure!30]   (b4) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2);  
      \draw[structure!30]   (c1) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2);  
      \draw[structure!30]   (c2) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2);  
      \draw[structure!30]   (c3) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2);  
      \draw[structure!30]   (d1) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2);  
      \draw[structure!30]   (d2) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2);  
      \draw[structure!30]   (e1) +(-\tabw/2,-\tabh/2) rectangle +(\tabw/2,\tabh/2);  
      
      \node<-10>[anchor=mid] at (a1) {$aabb        \cdot \varepsilon \cdot \varepsilon$};
      \node<-10>[anchor=mid] at (a2) {$aab         \cdot b           \cdot \varepsilon$};
      \node<-10>[anchor=mid] at (a3) {$aa          \cdot bb          \cdot \varepsilon$};
      \node<-10>[anchor=mid] at (a4) {$a           \cdot abb         \cdot \varepsilon$};
      \node<-10>[anchor=mid] at (a5) {$\varepsilon \cdot aabb        \cdot \varepsilon$};
      \node<-10>[anchor=mid] at (b1) {$aab         \cdot \varepsilon \cdot b$};
      \node<-10>[anchor=mid] at (b2) {$aa          \cdot b           \cdot b$};
      \node<-10>[anchor=mid] at (b3) {$a           \cdot ab          \cdot b$};
      \node<-10>[anchor=mid] at (b4) {$\varepsilon \cdot aab         \cdot b$};
      \node<-9> [anchor=mid] at (c1) {$aa          \cdot \varepsilon \cdot bb$};
      \node     [anchor=mid] at (c2) {$a           \cdot a           \cdot bb$};
      \node     [anchor=mid] at (c3) {$\varepsilon \cdot aa          \cdot bb$};
      \node<-9> [anchor=mid] at (d1) {$a           \cdot \varepsilon \cdot abb$};
      \node     [anchor=mid] at (d2) {$\varepsilon \cdot a           \cdot abb$};
      \node<-9> [anchor=mid] at (e1) {$\varepsilon \cdot \varepsilon \cdot abbb$};
    \end{tikzpicture}
  }

  \tf<10>[x=45mm, y=-35mm]{
    \begin{smArray}[width=3mm, height=3mm, name={$u=$}]\small
      \smCell[\smNone]{\alert{$a$}}      \smCoord{(a1)}
      \smCell[\smNone]{\alert{$\cdots$}}               
      \smCell[\smNone]{\alert{$a$}}      \smCoord{(an)}
      \smCell[\smNone]{\alert{$\cdot$}}               
      \smCell[\smNone]{\alert{$b$}}      \smCoord{(b1)}
      \smCell[\smNone]{\alert{$\cdots$}}               
      \smCell[\smNone]{\alert{$b$}}      \smCoord{(bn)}
      
      \draw [decorate, decoration={brace, amplitude=4pt}] ([xshift=1mm]a1.north west) -- ([xshift=-1mm]an.north east) node[midway,yshift=3mm]{$N$};
      \draw [decorate, decoration={brace, amplitude=4pt}] ([xshift=1mm]b1.north west) -- ([xshift=-1mm]bn.north east) node[midway,yshift=3mm]{$N$};
      \draw [decorate, decoration={brace, amplitude=4pt, mirror}] ([xshift=1mm]a1.south west) -- ([xshift=-1mm]an.south west) node[midway,yshift=-3mm]{$|xy|\le N$};
      \draw [decorate, decoration={brace, amplitude=4pt, mirror}] ([xshift=1mm]an.south west) -- ([xshift=-1mm]bn.south east) node[midway,yshift=-3mm]{$z$};
    \end{smArray}       
  }

  \tf<11>[x=45mm, y=-35mm]{
    \alert{$x \cdot y^2 \cdot z \notin L$}
  }

  
\end{frame}


\endgroup
