% SPDX-License-Identifier: CC-BY-SA-4.0
% Author: Matthieu Perrin
% Part: 
% Section: 
% Sub-section: 
% Frame: 

\begingroup

\begin{frame}{Stabilité par intersection}

  \onBlock[top=-3mm]{Théorème -- Stabilité par intersection}{
    Soient $\Sigma$ un alphabet et $L_1, L_2 \in \textsc{rat}_\Sigma$. Alors $L_1 \cap L_2 \in \textsc{rat}_\Sigma$. 
  }

  \obBlock<1>[y=23mm,anchor=north]{Preuve directe}{
    \begin{itemize}
    \item $L_1 \cap L_2 = \overline{\overline{L_1} \cup \overline{L_2}}$
    \item Remarque : stabilité par différence car $L_1 \setminus L_2 = L_1 \cap \overline{L_2}$
    \end{itemize}
  }

  \onBlock<2->[y=23mm,anchor=north]{Preuve par produit d'automates}{
    \begin{itemize}
    \item Il existe $\structure{A_1 = \langle \Sigma, Q_1, I_1, F_1, \rightarrow_1 \rangle}$ $\varepsilon$-libre qui reconnaît $L_1$.
    \item Il existe $\example{A_2 = \langle \Sigma, Q_2, I_2, F_2, \rightarrow_2 \rangle}$ $\varepsilon$-libre qui reconnaît $L_2$.
    \item<3->
      $L_1 \cap L_2$ est reconnu par \alert{$A_1 \times A_2 = \langle \Sigma, Q_1 \times Q_2, I_1 \times I_2, F_1 \times F_2, \rightarrow_{\times} \rangle$}, avec :\\
      \alert{$\langle q_1, q_2 \rangle \xrightarrow{a}_{\times} \langle q'_1, q'_2\rangle \quad\Leftrightarrow\quad q_1 \xrightarrow{a}_1 q'_1 \land q_2 \xrightarrow{a}_2 q'_2$}
    \end{itemize}
  }

  \onExampleBlock<2->[bottom]{Exemple}{
    \begin{itemize}
    \item $\structure{L_1 = \{u \in (a|b)^\star \;|\; |u|_a \equiv 0 \pmod{2}\}}$
    \item $\example{L_2 = \{u \in (a|b)^\star \;|\; |u|_b \equiv 1 \pmod{2}\}}$
    \item<3-> $\alert{L_1 \cap L_2 = \left\{u \in (a|b)^\star \,\middle\mid\,
      \begin{array}{@{}r@{}}
        |u|_a \equiv 0 \pmod{2}\\
        \land |u|_b \equiv 1 \pmod{2}
      \end{array}\right\}}$
    \end{itemize}
  }

  \on<2->[bottom, x=35mm]{
    \begin{tikzpicture}[automaton, x=5mm, y=4mm]
      \state[structure on=<-3>, structure ob=<5->, accepting          ] (a1) at (2,5) {$a_1$};
      \state[structure on=<-4>, initial right                         ] (a0) at (5,5) {$a_0$};
      \state[example on=<-5>, example ob=<7>, accepting, initial above] (b0) at (0,3) {$b_0$};
      \state[example on=<-3>,example ob=<6>                           ] (b1) at (0,0) {$b_1$};

      \path[structure] (a0) edge[bend right=3mm] node[above] {$a$} (a1);
      \path[structure] (a1) edge[bend right=3mm] node[below] {$a$} (a0);
      \path[structure] (a1) edge[loop above]     node        {$b$} (a1);
      \path[structure] (a0) edge[loop above]     node        {$b$} (a0);
      \path[example]   (b0) edge[bend right=3mm] node[left]  {$b$} (b1);
      \path[example]   (b1) edge[bend right=3mm] node[right] {$b$} (b0);
      \path[example]   (b1) edge[loop left]      node        {$a$} (b1);
      \path[example]   (b0) edge[loop left]      node        {$a$} (b0);

      \uncover<3->{
        \state[rectangle, alert on=<3>,alert on=<5>, alert on=<7>, accepting] (a1b0) at (2,3) {$a_1, b_0$};
        \state[rectangle, alert on=<3-4>, initial right]                      (a0b0) at (5,3) {$a_0, b_0$};
        \state[rectangle, alert on=<3>, alert on=<6>]                         (a1b1) at (2,0) {$a_1, b_1$};
        \state[rectangle, alert on=<3>]                                       (a0b1) at (5,0) {$a_0, b_1$};
        
        \path[alert]  (a0b0) edge[bend right=3mm] node[above] {$a$} (a1b0);
        \path[alert]  (a1b0) edge[bend right=3mm] node[below] {$a$} (a0b0);
        \path[alert]  (a0b1) edge[bend right=3mm] node[above] {$a$} (a1b1);
        \path[alert]  (a1b1) edge[bend right=3mm] node[below] {$a$} (a0b1);
        \path[alert]  (a0b0) edge[bend right=3mm] node[left]  {$b$} (a0b1);
        \path[alert]  (a0b1) edge[bend right=3mm] node[right] {$b$} (a0b0);
        \path[alert]  (a1b0) edge[bend right=3mm] node[left]  {$b$} (a1b1);
        \path[alert]  (a1b1) edge[bend right=3mm] node[right] {$b$} (a1b0);
      }
    \end{tikzpicture}
  }

  \on<4->[y=-15mm, x=10mm]{
    \begin{tikzpicture}[word, size=5mm]
      \cell{a} \smhead[on=<4>]
      \cell{b} \smhead[ob=<5>]
      \cell{a} \smhead[ob=<6>]
    \end{tikzpicture}
  }
  
\end{frame}

\endgroup
