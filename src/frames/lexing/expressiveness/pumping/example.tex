% SPDX-License-Identifier: CC-BY-SA-4.0
% Author: Matthieu Perrin
% Part: 
% Section: 
% Sub-section: 
% Frame: 

\begingroup

\begin{frame}{Exemple d'utilisation du lemme de l'étoile}

  \onBlock[top=-5mm]{Montrer que $L \eqdef \{a^nb^n : n\in \mathbb{N}\}$ n'est pas rationnel}{

    \uncover<2->{
      Supposons (par contradiction) $L$ rationnel.
    }%
    \uncover<3->{%
      D'après le lemme de l'étoile :

      \vspace{-2mm}
      $$
      \begin{array}{c}
        \structure<4->{\exists N\in \mathbb{N}}, \alert<5->{\forall u\in L}, |u| \ge N \Rightarrow (\structure<6->{\exists x, y, z\in \Sigma^\star}, \\
        u = x\cdot y \cdot z \land y\neq \varepsilon \land |xy| \le N \land \alert<7->{\forall i \in \mathbb{N}}, x\cdot y^i \cdot z \in L)
      \end{array}
      $$
    }

    \uncover<4->{%
      \structure{Soit $N$ donné par le lemme de l'étoile}. \\
    }\uncover<5->{%
      \alert{Posons $u = a^N b^N$}. 
    }\uncover<6->{%
      On a bien $u\in L$ et $|u| = 2N \ge N$. \\
    }\uncover<7->{%
      \structure{Soit $x\cdot y \cdot z$ la décomposition de $u$ donnée par le lemme de l'étoile}. 
    }

    \uncover<12->{
      \vspace{1mm}
      \begin{itemize}
      \item $xy$ : un préfixe de $a^N b^N$, de longueur au plus $N$, ne contient que des $a$.
      \end{itemize}
      
      On a: \hspace\fill $\structure{x = a^{|x|}}$, \hspace\fill $\structure{y = a^{|y|}}$ avec $|y| \neq 0$, \hspace\fill et $\structure{z = a^{N - |x| - |y|} b^N}$.\hspace\fill~ 
      
      \vspace{2mm}
      \alert{Posons $i = 2$}, on a : $\begin{array}[t]{rcl}
        x\cdot y^i \cdot z & = & x\cdot y \cdot y \cdot z\\
        & = & a^{|x|} \cdot a^{|y|} \cdot a^{|y|} \cdot a^{N - |x| - |y|} b^N\\
        & = & a^{N + |y|} b^N\\
      \end{array}$

      \begin{itemize}
      \item\vspace{-1mm} $\structure{x\cdot y^2 \cdot z \in L}$ d'après le lemme de l'étoile 
      \item\vspace{-1mm} $\structure{x\cdot y^2 \cdot z \notin L}$ car $|x\cdot y^2 \cdot z|_a = N+|y| \neq N = |x\cdot y^2 \cdot z|_b$
      \end{itemize}
      
      Absurde ! Donc $L$ n'est pas rationnel. 
    }
  }
  
  \obExampleBlock<-11>[y=-5mm, anchor=base]{Brouillon}{
    \example{On veut démontrer :} 
    \only<1>{ $L \notin \textsc{rat}_\Sigma$}
    \only<2-4,6->{ Contradiction}
    \only<5>{ $u\in L \land |u| \ge N$}

    \example{On sait :} 
    \begin{itemize}
    \item 
      \only<-2>{\hspace{-1.5mm}$\begin{array}[t]{l}
          \alert{\forall L \in \textsc{rat}_\Sigma}, \exists N\in \mathbb{N}, \forall u\in L, |u| \ge N \Rightarrow (\exists x, y, z\in \Sigma^\star, \\
          u = x y  z \land y\neq \varepsilon \land |xy| \le N \land \forall i \in \mathbb{N}, x y^i  z \in L)
        \end{array}$}
      \only<3>{$\hspace{-1.5mm}\begin{array}[t]{l}
          \structure{\exists N\in \mathbb{N}}, \forall u\in L, |u| \ge N \Rightarrow (\exists x, y, z\in \Sigma^\star, \\
          u = x y  z \land y\neq \varepsilon \land |xy| \le N \land \forall i \in \mathbb{N}, x y^i  z \in L)
        \end{array}$}
      \only<4>{$\hspace{-1.5mm}\begin{array}[t]{l}
          \alert{\forall u\in L, |u| \ge N \Rightarrow} (\exists x, y, z\in \Sigma^\star, \\
          u = x y  z \land y\neq \varepsilon \land |xy| \le N \land \forall i \in \mathbb{N}, x y^i  z \in L)
        \end{array}$}
      \only<5>{$\hspace{-1.5mm}\begin{array}[t]{l}
          \alert{(u\in L \land |u| \ge N) \Rightarrow} (\exists x, y, z\in \Sigma^\star, \\
          u = x y  z \land y\neq \varepsilon \land |xy| \le N \land \forall i \in \mathbb{N}, x y^i  z \in L)
        \end{array}$}
      \only<6>{$\structure{\exists x, y, z\in \Sigma^\star}, u = x y  z \land y\neq \varepsilon \land |xy| \le N \land \forall i \in \mathbb{N}, x y^i z \in L$}
      \only<7->{\alert<11>{$\forall i \in \mathbb{N}, x y^i  z \in L$}}
    \end{itemize}

    \vspace{-1mm}
    \begin{minipage}{2.5cm}
      \begin{itemize}
      \item<2-> $L \in \textsc{rat}_\Sigma$
      \item<4-> $N \in \mathbb{N}$
      \item<7-> \alert<9>{$y\neq \varepsilon$}
      \end{itemize}
    \end{minipage}
    \begin{minipage}{2.5cm}
      \begin{itemize}
      \item<7-> $x, y, z\in \Sigma^\star$
      \item<7-> $u = x y z$
      \item<7-> $\alert<10>{|xy| \le N}$
      \end{itemize}
    \end{minipage}
  }

  \obExampleBlock<8-11>[right=.5\textwidth, y=-5mm, anchor=base]{Exemple : pour $N=2$, $u=aabb$}{
    \begin{tikzpicture}[x=11mm, y=5mm]
      \footnotesize
      \tikzset{
        slot/.style={draw=structure!30, rectangle, text width=11mm, minimum height=5mm, inner sep=0pt, align=center, anchor=center},
        filled/.style={slot, fill=alert!20},
      }
      \node[alt=<9-10>{filled}{slot}] (a1) at (0,4) {\only<-10>{$aabb        \!\cdot\! \varepsilon \!\cdot\! \varepsilon$}};    
      \node[alt=<10>  {filled}{slot}] (a2) at (1,4) {\only<-10>{$aab         \!\cdot\! b           \!\cdot\! \varepsilon$}};    
      \node[alt=<10>  {filled}{slot}] (a3) at (2,4) {\only<-10>{$aa          \!\cdot\! bb          \!\cdot\! \varepsilon$}};    
      \node[alt=<10>  {filled}{slot}] (a4) at (3,4) {\only<-10>{$a           \!\cdot\! abb         \!\cdot\! \varepsilon$}};    
      \node[alt=<10>  {filled}{slot}] (a5) at (4,4) {\only<-10>{$\varepsilon \!\cdot\! aabb        \!\cdot\! \varepsilon$}};    
      \node[alt=<9-10>{filled}{slot}] (b1) at (0,3) {\only<-10>{$aab         \!\cdot\! \varepsilon \!\cdot\! b$}};              
      \node[alt=<10>  {filled}{slot}] (b2) at (1,3) {\only<-10>{$aa          \!\cdot\! b           \!\cdot\! b$}};              
      \node[alt=<10>  {filled}{slot}] (b3) at (2,3) {\only<-10>{$a           \!\cdot\! ab          \!\cdot\! b$}};              
      \node[alt=<10>  {filled}{slot}] (b4) at (3,3) {\only<-10>{$\varepsilon \!\cdot\! aab         \!\cdot\! b$}};              
      \node[alt=<9>   {filled}{slot}] (c1) at (0,2) {\only<-9> {$aa          \!\cdot\! \varepsilon \!\cdot\! bb$}};             
      \node[alt=<11>  {filled}{slot}] (c2) at (1,2) {\only<-11>{$a           \!\cdot\! a           \!\cdot\! bb$}};             
      \node[alt=<11>  {filled}{slot}] (c3) at (2,2) {\only<-11>{$\varepsilon \!\cdot\! aa          \!\cdot\! bb$}};             
      \node[alt=<9>   {filled}{slot}] (d1) at (0,1) {\only<-9> {$a           \!\cdot\! \varepsilon \!\cdot\! abb$}};            
      \node[alt=<11>  {filled}{slot}] (d2) at (1,1) {\only<-11>{$\varepsilon \!\cdot\! a           \!\cdot\! abb$}};            
      \node[alt=<9>   {filled}{slot}] (e1) at (0,0) {\only<-9> {$\varepsilon \!\cdot\! \varepsilon \!\cdot\! abbb$}};           
    \end{tikzpicture}
  }

  \ob<10>[x=40mm, y=-35mm]{
    \begin{tikzpicture}[word, x=3mm, y=3mm]\small
      \cell[open]{\alert{$a$}}      \smsave{a1}
      \cell[open]{\alert{$\cdots$}}             
      \cell[open]{\alert{$a$}}      \smsave{an}
      \cell[open]{\alert{$\cdot$}}             
      \cell[open]{\alert{$b$}}      \smsave{b1}
      \cell[open]{\alert{$\cdots$}}             
      \cell[open]{\alert{$b$}}      \smsave{bn}
      
      \draw [decorate, decoration={brace, amplitude=4pt        }] ([xshift=1mm]a1.north west) -- ([xshift=-1mm]an.north east) node[midway,yshift= 3mm]{$N$};
      \draw [decorate, decoration={brace, amplitude=4pt        }] ([xshift=1mm]b1.north west) -- ([xshift=-1mm]bn.north east) node[midway,yshift= 3mm]{$N$};
      \draw [decorate, decoration={brace, amplitude=4pt, mirror}] ([xshift=1mm]a1.south west) -- ([xshift=-1mm]an.south west) node[midway,yshift=-3mm]{$|xy|\le N$};
      \draw [decorate, decoration={brace, amplitude=4pt, mirror}] ([xshift=1mm]an.south west) -- ([xshift=-1mm]bn.south east) node[midway,yshift=-3mm]{$z$};
      \node [anchor=east] at (a1.west) {$u=$};
    \end{tikzpicture}
  }

  \ob<11>[x=45mm, y=-35mm]{
    \alert{$x \cdot y^2 \cdot z \notin L$}
  }

\end{frame}

\endgroup
