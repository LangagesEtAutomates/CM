% SPDX-License-Identifier: CC-BY-SA-4.0
% Author: Matthieu Perrin
% Part: 
% Section: 
% Sub-section: 
% Frame: 

\begingroup


\begin{frame}{Exemple complet}
  \begin{tikzpicture}
    \draw (0,4) node{
      \scalebox{.75}{\begin{tikzpicture}[shorten >=1pt,node distance=1.5cm,on grid,auto]
          \draw[white] (-.5,-2.3) rectangle (7.5,2.3);
          
          \node (a)                    {}; 
          \node (b) [above right=of a] {}; 
          \node (c) [below right=of a] {}; 
          \node (d) [below right=of b] {}; 
          \node (e) [right=of d]       {}; 
          \node (f) [above right=of e] {}; 
          \node (g) [below right=of e] {}; 
          \node (h) [below right=of f] {}; 

          \node [state,initial, initial text=, example] (a0) at (a) {$0$};
          \node<-3> [state, example] (b0) at (b) {$1$};
          \node<4-> [state, alert] (b0) at (b) {$1$};
          \node [state,accepting, fill=example!20] (c0) at (c) {$2$};
          \node [state, example] (d0) at (d) {$3$};
          \node<1> [state,accepting, fill=example!20] (e0) at (e) {$4$};
          \node<2-> [state,accepting, fill=alert!20] (e0) at (e) {$4$};
          \node<-2> [state,accepting, fill=example!20] (f0) at (f) {$5$};
          \node<3> [state,accepting, fill=alert!20] (f0) at (f) {$5$};
          \node<3-> [state,accepting, fill=structure!20] (f0) at (f) {$5$};
          \node [state,accepting, fill=example!20] (g0) at (g) {$6$};
          \node [state,accepting, fill=example!20] (h0) at (h) {$7$};

          
          \path[->] (a0) edge node[above left]  {$a$} (b0);
          \path[->] (a0) edge node[below left]  {$b$} (c0);
          \path[->] (d0) edge node[above right] {$a$} (b0);
          \path[->] (d0) edge node[below right] {$b$} (c0);
          \path[->] (e0) edge node[above]  {$b$} (d0);
          \path[->] (b0) edge node[above]  {$b$} (f0);
          \path[->] (c0) edge node[below]  {$a$} (g0);
          \path[->] (f0) edge node[above left]  {$a$} (e0);
          \path[->] (e0) edge node[below left]  {$a$} (g0);
          \path[->] (f0) edge node[above right] {$b$} (h0);
          \path[->] (h0) edge[bend right] node[above left]  {$a$} (g0);
          \path[->] (g0) edge[bend right] node[below right] {$b$} (h0);
          \path[->] (b0) edge[loop above, looseness=5] node  {$a$} (b0);
          \path[->] (c0) edge[loop below, looseness=5] node  {$b$} (c0);
          \path[->] (g0) edge[loop below, looseness=5] node  {$a$} (g0);
          \path[->] (h0) edge[loop right, looseness=5] node  {$b$} (h0);
      \end{tikzpicture}}
    };

    \mode<beamer>{
    \draw<1> (5,5.5) node[below]{\scalebox{.5}{
        \begin{tabular}{|l|c|c|c|c|c|c|c|c|}
          \hline
          \structure{\textbf{Entrée}} & \multicolumn{8}{c|}{\structure{\textbf{\'Etat}}}\\
           & 0 & 1 & 2 & 3 & 4 & 5 & 6 & 7 \\
          \hline
          \hline
          \structure{$\varepsilon$} & B & B & C & B & C & C & C & C \\
          \hline
        \end{tabular}
    }};
    \draw<2> (5,5.5) node[below]{\scalebox{.5}{
        \begin{tabular}{|l|c|c|c|c|c|c|c|c|}
          \hline
          \structure{\textbf{Entrée}} & \multicolumn{8}{c|}{\structure{\textbf{\'Etat}}}\\
           & 0 & 1 & 2 & 3 & 4 & 5 & 6 & 7 \\
          \hline
          \hline
          \structure{$\varepsilon$} & B & B & C & B & C & C & C & C \\
          \hline
          \hline
          a & B & B & C & B & C & C & C & C\\
          b & C & C & C & C & B & C & C & C\\
          \hline
          \structure{Bilan} & B & B & D & B & E & D & D & D \\
          \hline
        \end{tabular}
    }};
    \draw<3> (5,5.5) node[below]{\scalebox{.5}{
        \begin{tabular}{|l|c|c|c|c|c|c|c|c|}
          \hline
          \structure{\textbf{Entrée}} & \multicolumn{8}{c|}{\structure{\textbf{\'Etat}}}\\
           & 0 & 1 & 2 & 3 & 4 & 5 & 6 & 7 \\
          \hline
          \hline
          \structure{$\varepsilon$} & B & B & C & B & C & C & C & C \\
          \hline
          \hline
          a & B & B & C & B & C & C & C & C\\
          b & C & C & C & C & B & C & C & C\\
          \hline
          \structure{Bilan} & B & B & D & B & E & D & D & D \\
          \hline
          \hline
          a & B & B & D & B & D & E & D & D\\
          b & D & D & D & D & B & D & D & D\\
          \hline
          \structure{Bilan} & B & B & F & B & E & G & F & F \\
          \hline
        \end{tabular}
    }};
    \draw<4> (5,5.5) node[below]{\scalebox{.5}{
        \begin{tabular}{|l|c|c|c|c|c|c|c|c|}
          \hline
          \structure{\textbf{Entrée}} & \multicolumn{8}{c|}{\structure{\textbf{\'Etat}}}\\
           & 0 & 1 & 2 & 3 & 4 & 5 & 6 & 7 \\
          \hline
          \hline
          \structure{$\varepsilon$} & B & B & C & B & C & C & C & C \\
          \hline
          \hline
          a & B & B & C & B & C & C & C & C\\
          b & C & C & C & C & B & C & C & C\\
          \hline
          \structure{Bilan} & B & B & D & B & E & D & D & D \\
          \hline
          \hline
          a & B & B & D & B & D & E & D & D\\
          b & D & D & D & D & B & D & D & D\\
          \hline
          \structure{Bilan} & B & B & F & B & E & G & F & F \\
          \hline
          \hline
          a & B & B & F & B & F & E & F & F\\
          b & F & G & F & F & B & F & F & F\\
          \hline
          \structure{Bilan} & H & I & F & H & E & G & F & F \\
          \hline
        \end{tabular}
    }};
    }
    \draw<5> (5,5.5) node[below]{\scalebox{.5}{
        \begin{tabular}{|l|c|c|c|c|c|c|c|c|}
          \hline
          \structure{\textbf{Entrée}} & \multicolumn{8}{c|}{\structure{\textbf{\'Etat}}}\\
           & 0 & 1 & 2 & 3 & 4 & 5 & 6 & 7 \\
          \hline
          \hline
          \structure{$\varepsilon$} & B & B & C & B & C & C & C & C \\
          \hline
          \hline
          a & B & B & C & B & C & C & C & C\\
          b & C & C & C & C & B & C & C & C\\
          \hline
          \structure{Bilan} & B & B & D & B & E & D & D & D \\
          \hline
          \hline
          a & B & B & D & B & D & E & D & D\\
          b & D & D & D & D & B & D & D & D\\
          \hline
          \structure{Bilan} & B & B & F & B & E & G & F & F \\
          \hline
          \hline
          a & B & B & F & B & F & E & F & F\\
          b & F & G & F & F & B & F & F & F\\
          \hline
          \structure{Bilan} & H & I & F & H & E & G & F & F \\
          \hline
          \hline
          a & I & I & F & I & F & E & F & F\\
          b & F & G & F & F & H & F & F & F\\
          \hline
          \structure{Bilan} & H & I & F & H & E & G & F & F \\
          \hline
        \end{tabular}
    }};

    \draw (-1,0) node{
      \scalebox{.75}{\begin{tikzpicture}[shorten >=1pt,node distance=1.5cm,on grid,auto]
          \draw[white] (-2.5,-2.5) rectangle (2.5,2.5);
          
          \node (s1) {};
          \node (s2) [left =of s1] {};
          \node (s3) [right=of s1] {};
          \node (s4) [above=of s1] {};
          \node (s5) [below=of s1] {};

          \node<1-3>[state, initial, initial text=, example] (03)  at (s2) {$B$};
          \node<1>  [state, accepting, fill=example!20] (5)   at (s3) {$C$};
          \node<2>  [state, accepting, fill=example!20] (5)   at (s3) {$D$};

          
          \node<4->[state, initial, initial text=, example] (03)  at (s2) {$H$};
          \node<4->[state, alert] (1)   at (s5) {$I$};
          \node<3->[state, accepting, fill=example!20] (5)   at (s3) {$G$};
          \node<3->[state, accepting, fill=structure!20] (267) at (s1) {$F$};
          \node<2->[state, accepting, fill=alert!20] (4)   at (s4) {$E$};

          \path<5->[->] (1) edge[loop right, looseness=5] node[right] {$a$} (1);
          \path<5->[->] (267) edge[loop below, looseness=5] node[below] {$a$} (267);
          \path<5->[->]  (03) edge node[above] {$b$} (267);
          \path<5->[->]  (4)  edge node[right] {$a$} (267);
          \path<5->[->]  (5)  edge node[above] {$b$} (267);
          \path<5->[->]  (03) edge node[above] {$a$} (1);
          \path<5->[->]  (1)  edge node[above] {$b$} (5);
          \path<5->[->]  (5)  edge node[above] {$a$} (4);
          \path<5->[->]  (4)  edge node[above] {$b$} (03);
      \end{tikzpicture}}
    };
    \draw (4.5,0) node{
      \scalebox{.6}{\begin{tikzpicture}
          \draw[white] (-2,.5) rectangle (6,4.5);
          \draw[structure] (2,4) node{$A = \{0,1,2, 3, 4, 5, 6, 7\}$};

          \draw[example] (0,3) node{$B = \{0,1,3\}$};
          \draw[example] (4,3) node{$C = \{2,4,5,6,7\}$};

          \draw<4->[example] (-1,2) node{$H = \{0, 3\}$};
          \draw<4->[alert] (1,2) node{$I = \{1\}$};
          
          \draw<2->[example] (3,2) node{$D = \{2,5,6,7\}$};
          \draw<2->[alert] (5,2) node{$E = \{4\}$};
          
          \draw<3->[structure] (2,1) node{$F = \{5\}$};
          \draw<3->[example] (4,1) node{$G = \{2,6,7\}$};
          
          \draw[-latex] (0.75,3.75) -- (0.25, 3.25);
          \draw[-latex] (3.25,3.75) -- (3.75, 3.25);
          \draw (2,3.5) node{$\varepsilon$};

          \draw<4->[-latex] (-.25,2.75) -- (-.75,2.25);
          \draw<4->[-latex] (0.25,2.75) -- (0.75,2.25);
          \draw<4-> (0,2.5) node{$b$};

          \draw<2->[-latex] (3.75,2.75) -- (3.25,2.25);
          \draw<2->[-latex] (4.25,2.75) -- (4.75,2.25);
          \draw<2-> (4,2.5) node{$b$};
          
          \draw<3->[-latex] (2.75,1.75) -- (2.25,1.25);
          \draw<3->[-latex] (3.25,1.75) -- (3.75,1.25);
          \draw<3-> (3,1.5) node{$a$};
      \end{tikzpicture}}
    };
  \end{tikzpicture}
\end{frame}


\endgroup
