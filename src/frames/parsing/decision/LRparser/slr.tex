% SPDX-License-Identifier: CC-BY-SA-4.0
% Author: Matthieu Perrin
% Part: 
% Section: 
% Sub-section: 
% Frame: 

\begingroup

\begin{frame}{SLR(1) : Simple LR (anticipation d'un symbole)}

  \onBlock[top=-3mm]{Comment régler les conflits ?}{
    \begin{itemize}
    \item Parfois, il suffit de fusionner une réduction avec le décalage suivant
      \begin{center}
        \begin{tikzpicture}[automaton, x=25mm, y=5mm]
          \state (1) at (0,0) {$q_1$};
          \state (2) at (1,1) {$q_2$};
          \state (3) at (2,0) {$q_3$};

          \path[densely dotted] (1) edge node[sloped] {\smPAtrans{\varepsilon}{p}{p'}}    (2);
          \path[densely dotted] (2) edge node[sloped] {\smPAtrans{a}{\varepsilon}{q_3}}    (3);
          \path                 (1) edge node[swap]   {\smPAtrans{a}{p}{p'q_3}}         (3);
        \end{tikzpicture}
      \end{center}
    \item $SLR(k)$ : on considère les $k$ décalages qui suivent chaque réduction
    \end{itemize}
  }

  \onExampleBlock[y=-15mm]{Exemple}{
    \example{$
      \left\{\begin{array}{@{\,}r@{\,}c@{\,}l@{}}
      S &\rightarrow& E \$\\
      E &\rightarrow & A a \mid B b\\
      A &\rightarrow& a \\
      B &\rightarrow & a 
      \end{array}\right.
      $}
  }
  
  \on[bottom, x=10mm]{
    \begin{tikzpicture}[pushdown, initial text=0, x=15mm, y=10mm]
      \state[initial]               (0) at (0,1) {$0$};
      \state                        (1) at (1,1) {$1$};
      \state[alert, opacity=.5]     (2) at (2,2) {$2$};
      \state[structure, opacity=.5] (3) at (2,0) {$3$};
      \state                        (5) at (3,2) {$5$};
      \state                        (6) at (3,0) {$6$};
      \state[example, opacity=.5]   (4) at (4,1) {$4$};
      \state[accepting]             (7) at (5,1) {$7$};

      \path                                        (0) edge                 node[swap]        {\smPAtrans{a}{\varepsilon}{1}}    (1);
      \path[densely dotted, opacity=.5, alert]     (2) edge                 node              {\smPAtrans{a}{\varepsilon}{5}}    (5);
      \path[densely dotted, opacity=.5, structure] (3) edge                 node[swap]        {\smPAtrans{b}{\varepsilon}{6}}    (6);
      \path[densely dotted, opacity=.5, example]   (4) edge                 node              {\smPAtrans{\$}{\varepsilon}{7}}   (7);
      \path[densely dotted, opacity=.5, alert]     (1) edge[bend left=7mm]  node[sloped]      {\smPAtrans{\varepsilon}{01}{02}}  (2);
      \path[densely dotted, opacity=.5, structure] (1) edge[bend right=7mm] node[sloped,swap] {\smPAtrans{\varepsilon}{01}{03}}  (3);
      \path[densely dotted, opacity=.5, example]   (5) edge[bend left=7mm]  node[sloped,swap] {\smPAtrans{\varepsilon}{025}{04}} (4);
      \path[densely dotted, opacity=.5, example]   (6) edge[bend right=7mm] node[sloped]      {\smPAtrans{\varepsilon}{036}{04}} (4);
      \path[alert]                                 (1) edge                 node[sloped,swap] {\smPAtrans{a}{01}{025}}           (5);
      \path[structure]                             (1) edge                 node[sloped]      {\smPAtrans{b}{01}{036}}           (6);
      \path[example]                               (5) edge[bend left=7mm]  node[sloped]      {\smPAtrans{\$}{025}{047}}         (7);
      \path[example]                               (6) edge[bend right=7mm] node[sloped,swap] {\smPAtrans{\$}{036}{047}}         (7);
    \end{tikzpicture}
  }
  
\end{frame}

\endgroup
