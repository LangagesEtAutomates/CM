% SPDX-License-Identifier: CC-BY-SA-4.0
% Author: Matthieu Perrin
% Part: 
% Section: 
% Sub-section: 
% Frame: 

\begingroup

\begin{frame}{Conflits}
  
  \on[text,top=-2mm]{
    \begin{itemize}
    \item Si l'automate à pile est déterministe, on a terminé
    \item Sinon, l'algorithme échoue sur un conflit
    \end{itemize}
  }
 
  \onBlock[y=8mm]{Conflit par réduction/réduction}{
    \begin{itemize}
    \item Quelle réduction suivre en 1 ? 
    \end{itemize}
    \example{$\begin{array}{c}
        G_1 = \langle\{a,b,\$\}, \{S, E, A, B\}, S, \\
        \left\{\begin{array}{@{\,}r@{\,}c@{\,}l@{}}
        S &\rightarrow& E \$\\
        E &\rightarrow & A a \mid B b\\
        A &\rightarrow& a \\
        B &\rightarrow & a 
        \end{array}\right\}\rangle
      \end{array}$}
  }
  
  \on[y=7mm,x=30mm]{
    \begin{tikzpicture}[pushdown, initial text=0, grid size=12mm]
      \state[alert, rectangle] (1) at (-1,1) {\scriptsize$1:
        \left\{\begin{array}{@{\,}r@{\,}c@{\,}l@{}}
        S &\rightarrow& E \$\\
        E &\rightarrow & A a \mid B b\\
        A &\rightarrow& a \bullet\\
        B &\rightarrow & a \bullet
        \end{array}\right.
        $};
      \state[initial above] (0) at (1,1) {$0$};
      \state                (2) at (0,2) {$2$};
      \state                (3) at (0,0) {$3$};
      \state                (4) at (2,1) {$4$};
      \state                (5) at (2,2) {$5$};
      \state                (6) at (2,0) {$6$};
      \state[accepting]     (7) at (3,1) {$7$};
 
      \path[->, densely dotted] (0) edge                 node[swap]             {\scriptsize$A$}                              (2);
      \path[->, densely dotted] (0) edge                 node                   {\scriptsize$B$}                              (3);
      \path[->, densely dotted] (0) edge                 node                   {\scriptsize$E$}                              (4);
      \path                     (0) edge                 node[swap]             {\scriptsize\smPAtrans{a}{\varepsilon}{1}}    (1);
      \path                     (2) edge                 node                   {\scriptsize\smPAtrans{a}{\varepsilon}{5}}    (5);
      \path                     (3) edge                 node[swap]             {\scriptsize\smPAtrans{b}{\varepsilon}{6}}    (6);
      \path                     (4) edge                 node                   {\scriptsize\smPAtrans{\$}{\varepsilon}{7}}   (7);
      \path[alert]              (1) edge[bend left=7mm]  node[]                 {\scriptsize\smPAtrans{\varepsilon}{01}{02}}  (2);
      \path[alert]              (1) edge[bend right=7mm] node[swap]             {\scriptsize\smPAtrans{\varepsilon}{01}{03}}  (3);
      \path                     (5) edge                 node[yshift=1mm]       {\scriptsize\smPAtrans{\varepsilon}{025}{04}} (4);
      \path                     (6) edge                 node[yshift=-1mm,swap] {\scriptsize\smPAtrans{\varepsilon}{036}{04}} (4);
    \end{tikzpicture}
  }
  
  \onBlock[bottom=1mm]{Conflit par décalage/réduction}{
    \begin{itemize}
    \item Décaler ou réduire en 1 ? 
    \end{itemize}
    \example{$\begin{array}{c}
        G_2 = \langle\{1,+,\$\}, \{S, E, T\}, S, \\
        \left\{\begin{array}{@{\,}r@{\,}c@{\,}l@{}}
        S &\rightarrow& E \$\\
        E &\rightarrow & T +E \mid T\\
        T &\rightarrow& 1
        \end{array}\right\}\rangle
      \end{array}$}
  }
 
  \on[y=-27mm,x=30mm]{
    \begin{tikzpicture}[pushdown, initial text=0, grid size=12mm]
      \state[alert, rectangle] (1) at (2.0,1.2) {\scriptsize$1:
        \left\{\begin{array}{@{\,}r@{\,}c@{\,}l@{}}
        S &\rightarrow& E \$\\
        E &\rightarrow & T \bullet +E \mid T \bullet\\
        T &\rightarrow& 1
        \end{array}\right.
        $};
      \state[initial  ] (0) at (0.0,1.2) {$0$};
      \state[         ] (2) at (0.0,0.0) {$2$};
      \state[         ] (3) at (4.0,0.0) {$3$};
      \state[         ] (4) at (4.0,1.2) {$4$};
      \state[         ] (5) at (2.0,2.4) {$5$};
      \state[accepting] (6) at (0.0,2.4) {$6$};
 
      \path[->,densely dotted] (0) edge                node              {\scriptsize$E$}                               (5);
      \path[->,densely dotted] (0) edge                node[swap]        {\scriptsize$T$}                               (1);
      \path[->,densely dotted] (3) edge[bend left=5mm] node              {\scriptsize$T$}                               (1);
      \path[->,densely dotted] (3) edge                node[swap]        {\scriptsize$E$}                               (4);
      \path                    (5) edge                node[swap,sloped] {\scriptsize\smPAtrans{\$}{\varepsilon}{6}}    (6);
      \path                    (0) edge                node[swap,sloped] {\scriptsize\smPAtrans{1}{\varepsilon}{2}}     (2);
      \path[example]           (1) edge                node[sloped]      {\scriptsize\smPAtrans{+}{\varepsilon}{3}}     (3);
      \path                    (3) edge                node[swap]        {\scriptsize\smPAtrans{1}{\varepsilon}{2}}     (2);
      \path[alert]             (1) edge                node              {\scriptsize\smPAtrans{\varepsilon}{01}{05}}   (5);
      \path                    (4) edge                node[sloped]      {\scriptsize\smPAtrans{\varepsilon}{0134}{05}} (5);
      \path[alert]             (1) edge                node[swap]        {\scriptsize\smPAtrans{\varepsilon}{31}{34}}   (4);
      \path                    (4) edge[loop above]    node              {\scriptsize\smPAtrans{\varepsilon}{3134}{34}} (4);
      \path                    (2) edge                node[sloped]      {\scriptsize\smPAtrans{\varepsilon}{32}{31}} node[swap,sloped] {\smPAtrans{\varepsilon}{02}{01}}   (1);
    \end{tikzpicture}
  }
    
\end{frame}

\endgroup
