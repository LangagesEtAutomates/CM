% SPDX-License-Identifier: CC-BY-SA-4.0
% Author: Matthieu Perrin
% Part: 
% Section: 
% Sub-section: 
% Frame: 

\begingroup

\begin{frame}{Conception d'un compilateur}

  \on[y=5mm]{
    \begin{tikzpicture}
      \node[smBox, minimum width=2cm, minimum height=1.3cm, fill=alert!30] (regexp)  at (2.5, 6.5) {Expressions\\rationnelles};
      \node[smBox, minimum width=2cm, minimum height=1.3cm, fill=alert!30] (grammar) at (7,   6.5) {Grammaire\\algébrique};
      \node                                                                (start)   at (0,   3.0) {};
      \node[smBox, minimum width=2cm, minimum height=1.3cm]                (lexer)   at (2.5, 3.0) {Automate\\ fini};
      \node[smBox, minimum width=2cm, minimum height=1.3cm]                (parser)  at (7,   3.0) {Automate\\à pile};
      \node                                                                (end)     at (10,  3.0) {};

      \path[-latex, alert, dashed] (regexp) edge
      node[right]{JFlex}
      node[left, align=right, black]{Lex\\ Flex\\...}
      (lexer);

      \path[-latex, alert, dashed] (grammar) edge
      node[left]{CUP}
      node[right, align=left, black]{Yacc\\ Bison\\ ANTLR\\...}
      (parser);

      
      \scriptsize
      \path[-latex] (start) edge
      node[above,align=center]{Langage\\ source}
      node[below, example]{$15+2 * x$}
      (lexer);

      \path[-latex] (lexer) edge
      node[above,align=center]{Chaîne de tokens}
      node[below, example]{$\textsc{int}~\textsc{plus}~\textsc{int}~\textsc{times}~\textsc{var}$}
      (parser);

      \path[-latex] (parser) edge
      node[above,align=center]{Arbre de la syntaxe\\abstraite (AST)}
      node[below, example]{
        \begin{tikzpicture}[tree,x=7mm,y=4mm]
          \tree    {$+$}{
            \tree  {$15$}{}
            \tree  {$*$}{
              \tree{$2$}{}
              \tree{$x$}{}
            }
          }
        \end{tikzpicture}
      }
      (end);
    \end{tikzpicture}
  }

  \onBlock[bottom]{Programme}{
    \begin{description}
    \item[En CM/TD :] Étude des algorithmes de transformation
    \item[En TP :] Création d'un interpréteur en Java basé sur JFlex et CUP
    \end{description}
  }
  
\end{frame}

\endgroup
